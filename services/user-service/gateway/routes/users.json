{
  "id": "user-service-users",
  "name": "user-service-users",
  "uris": [
    "/api/v1/users",
    "/api/v1/users/*"
  ],
  "methods": [
    "GET",
    "POST",
    "PUT",
    "DELETE",
    "PATCH",
    "OPTIONS"
  ],
  "upstream": {
    "type": "roundrobin",
    "nodes": {
      "user-service:3500": 1
    },
    "timeout": {
      "connect": 6,
      "send": 30,
      "read": 30
    }
  },
  "plugins": {
    "openid-connect": {
      "client_id": "aetherweave-api",
      "client_secret": "CHANGE_ME_IN_PRODUCTION",
      "discovery": "http://keycloak:8080/realms/aetherweave/.well-known/openid-configuration",
      "scope": "openid profile email",
      "bearer_only": true,
      "realm": "aetherweave",
      "use_jwks": true,
      "token_signing_alg_values_expected": "RS256"
    },
    "proxy-rewrite": {
      "regex_uri": [
        "^/api/v1/users(.*)",
        "/v1.0/invoke/user-service/method/users$1"
      ]
    },
    "cors": {
      "allow_origins": "**",
      "allow_methods": "GET,POST,PUT,DELETE,PATCH,OPTIONS",
      "allow_headers": "Authorization,Content-Type,X-Requested-With,X-Dapr-App-Id",
      "expose_headers": "Content-Length,Content-Type",
      "max_age": 86400,
      "allow_credential": true
    },
    "zipkin": {
      "endpoint": "http://jaeger:9411/api/v2/spans",
      "sample_ratio": 1,
      "service_name": "apisix-gateway"
    }
  }
}
